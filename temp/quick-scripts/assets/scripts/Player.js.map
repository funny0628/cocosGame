{"version":3,"sources":["Player.js"],"names":["cc","Class","extends","Component","properties","jumpHeight","jumpDuration","maxMoveSpeed","accel","onLoad","jumpAction","setJumpAction","node","runAction","accLeft","accRight","xSpeed","systemEvent","on","SystemEvent","EventType","KEY_DOWN","onKeyDown","KEY_UP","onKeyUp","jumpUp","moveBy","v2","easing","easeCubicActionOut","jumpDown","easeCubicActionIn","repeatForever","sequence","event","keyCode","macro","KEY","a","d","onDestroy","off","update","dt","Math","abs","x"],"mappings":"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","file":"Player.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        //主角跳跃的高度\r\n       jumpHeight:0,\r\n       //主角跳跃的时间\r\n       jumpDuration:0,\r\n       //主角的最大的移动速度\r\n       maxMoveSpeed:0,\r\n       //最加速度\r\n       accel:0,\r\n\r\n    },\r\n    //场景一加载执行的逻辑\r\n    onLoad(){\r\n        this.jumpAction = this.setJumpAction();\r\n        this.node.runAction(this.jumpAction);\r\n        //初始化速度的大小和方向\r\n        this.accLeft = false;\r\n        this.accRight = false;\r\n        this.xSpeed = 0;\r\n        //监听键盘按下的事件\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this);\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this);\r\n    },\r\n    //主角跳跃的逻辑\r\n    setJumpAction(){\r\n        let jumpUp = cc.moveBy(this.jumpDuration,cc.v2(0,this.jumpHeight)).easing(cc.easeCubicActionOut());\r\n        let jumpDown = cc.moveBy(this.jumpDuration,cc.v2(0, -this.jumpHeight)).easing(cc.easeCubicActionIn());\r\n        //持续重复这个动作\r\n        return cc.repeatForever(cc.sequence(jumpUp,jumpDown));\r\n    },\r\n\r\n    onKeyDown(event){\r\n        switch (event.keyCode) {\r\n            case cc.macro.KEY.a:\r\n                this.accLeft = true;\r\n                break;\r\n            case cc.macro.KEY.d:\r\n                this.accRight = true;\r\n                break;\r\n        \r\n            default:\r\n                break;\r\n        }\r\n    },\r\n    onKeyUp(event){\r\n        switch (event.keyCode) {\r\n            case cc.macro.KEY.a:\r\n                this.accLeft = false;\r\n                break;\r\n            case cc.macro.KEY.d:\r\n                this.accRight = false;\r\n                break;\r\n        \r\n            default:\r\n                break;\r\n        }\r\n    },\r\n   \r\n    onDestroy() {\r\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this);\r\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this);\r\n    },\r\n\r\n    //场景加载后每帧会调用一次\r\n   update (dt) {\r\n\r\n        if(this.accLeft){\r\n            this.xSpeed -= this.accel * dt;\r\n        }else if(this.accRight){\r\n            this.xSpeed += this.accel * dt;\r\n        } \r\n\r\n        //限制主角的最大的速度不可以超过最大值\r\n        if(Math.abs(this.xSpeed) > this.maxMoveSpeed){\r\n            this.xSpeed = this.maxMoveSpeed * this.xSpeed / Math.abs(this.xSpeed);//--------------------------------\r\n        }\r\n\r\n        this.node.x += this.xSpeed * dt;\r\n   },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}